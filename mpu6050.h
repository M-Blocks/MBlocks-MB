/*
 * mpu6050.h
 *
 *  Created on: Mar 27, 2014
 *      Author: kwgilpin
 */

#ifndef MPU6050_H_
#define MPU6050_H_

#include <stdint.h>
#include <stdbool.h>

#define MPU6050_AUX_VDDIO_REG_ADDR				0X00
#define MPU6050_YG_OFFS_TC_REG_ADDR				0X01
#define MPU6050_ZG_OFFS_TC_REG_ADDR				0X02
#define MPU6050_X_FINE_GAIN_REG_ADDR			0X03
#define MPU6050_Y_FINE_GAIN_REG_ADDR			0X04
#define MPU6050_Z_FINE_GAIN_REG_ADDR			0X05
#define MPU6050_XA_OFFS_H_REG_ADDR				0X06
#define MPU6050_XA_OFFS_L_TC_REG_ADDR			0X07
#define MPU6050_YA_OFFS_H_REG_ADDR				0X08
#define MPU6050_YA_OFFS_L_LT_REG_ADDR			0X09
#define MPU6050_ZA_OFFS_H_REG_ADDR				0X0A
#define MPU6050_ZA_OFFS_L_LT_REG_ADDR			0X0B
#define MPU6050_XG_OFFS_USRH_REG_ADDR			0X13
#define MPU6050_XG_OFFS_USRL_REG_ADDR			0X14
#define MPU6050_YG_OFFS_USRH_REG_ADDR			0X15
#define MPU6050_YG_OFFS_USRL_REG_ADDR			0X16
#define MPU6050_ZG_OFFS_USRH_REG_ADDR			0X17
#define MPU6050_ZG_OFFS_USRL_REG_ADDR			0X18
#define MPU6050_SMPLRT_DIV_REG_ADDR				0X19
#define MPU6050_CONFIG_REG_ADDR					0X1A
#define MPU6050_GYRO_CONFIG_REG_ADDR			0X1B
#define MPU6050_ACCEL_CONFIG_REG_ADDR			0X1C
#define MPU6050_FF_THR_REG_ADDR					0X1D
#define MPU6050_FF_DUR_REG_ADDR					0X1E
#define MPU6050_MOT_THR_REG_ADDR				0X1F
#define MPU6050_MOT_DUR_REG_ADDR				0X20
#define MPU6050_ZRMOT_THR_REG_ADDR				0X21
#define MPU6050_ZRMOT_DUR_REG_ADDR				0X22
#define MPU6050_FIFO_EN_REG_ADDR				0X23
#define MPU6050_I2C_MST_CTRL_REG_ADDR			0X24
#define MPU6050_I2C_SLV0_ADDR_REG_ADDR			0X25
#define MPU6050_I2C_SLV0_REG_REG_ADDR			0X26
#define MPU6050_I2C_SLV0_CTRL_REG_ADDR			0x27
#define MPU6050_I2C_SLV1_ADDR_REG_ADDR			0X28
#define MPU6050_I2C_SLV1_REG_REG_ADDR			0X29
#define MPU6050_I2C_SLV1_CTRL_REG_ADDR			0x2A
#define MPU6050_I2C_SLV2_ADDR_REG_ADDR			0X2B
#define MPU6050_I2C_SLV2_REG_REG_ADDR			0X2C
#define MPU6050_I2C_SLV2_CTRL_REG_ADDR			0x2D
#define MPU6050_I2C_SLV3_ADDR_REG_ADDR			0X2E
#define MPU6050_I2C_SLV3_REG_REG_ADDR			0X2F
#define MPU6050_I2C_SLV3_CTRL_REG_ADDR			0x30
#define MPU6050_I2C_SLV4_ADDR_REG_ADDR			0X31
#define MPU6050_I2C_SLV4_REG_REG_ADDR			0X32
#define MPU6050_I2C_SLV4_DO_REG_ADDR			0x33
#define MPU6050_I2C_SLV4_CTRL_REG_ADDR			0x24
#define MPU6050_I2C_SLV4_DI_REG_ADDR			0x35
#define MPU6050_I2C_MST_STATUS_REG_ADDR			0X36
#define MPU6050_INT_PIN_CFG_REG_ADDR			0X37
#define MPU6050_INT_ENABLE_REG_ADDR				0X38
#define MPU6050_DMP_INT_STATUS_REG_ADDR			0X39
#define MPU6050_INT_STATUS_REG_ADDR				0X3A
#define MPU6050_ACCEL_XOUT_H_REG_ADDR			0X3B
#define MPU6050_ACCEL_XOUT_L_REG_ADDR			0X3C
#define MPU6050_ACCEL_YOUT_H_REG_ADDR			0X3D
#define MPU6050_ACCEL_YOUT_L_REG_ADDR			0X3E
#define MPU6050_ACCEL_ZOUT_H_REG_ADDR			0X3F
#define MPU6050_ACCEL_ZOUT_L_REG_ADDR			0X40
#define MPU6050_TEMP_OUT_H_REG_ADDR				0X41
#define MPU6050_TEMP_OUT_L_REG_ADDR				0X42
#define MPU6050_GYRO_XOUT_H_REG_ADDR			0X43
#define MPU6050_GYRO_XOUT_L_REG_ADDR			0X44
#define MPU6050_GYRO_YOUT_H_REG_ADDR			0X45
#define MPU6050_GYRO_YOUT_L_REG_ADDR			0X46
#define MPU6050_GYRO_ZOUT_H_REG_ADDR			0X47
#define MPU6050_GYRO_ZOUT_L_REG_ADDR			0X48
#define MPU6050_EXT_SENS_DATA_00_REG_ADDR		0x49
#define MPU6050_EXT_SENS_DATA_01_REG_ADDR		0x4A
#define MPU6050_EXT_SENS_DATA_02_REG_ADDR		0x4B
#define MPU6050_EXT_SENS_DATA_03_REG_ADDR		0x4C
#define MPU6050_EXT_SENS_DATA_04_REG_ADDR		0x4D
#define MPU6050_EXT_SENS_DATA_05_REG_ADDR		0x4E
#define MPU6050_EXT_SENS_DATA_06_REG_ADDR		0x4F
#define MPU6050_EXT_SENS_DATA_07_REG_ADDR		0x50
#define MPU6050_EXT_SENS_DATA_08_REG_ADDR		0x51
#define MPU6050_EXT_SENS_DATA_09_REG_ADDR		0x52
#define MPU6050_EXT_SENS_DATA_10_REG_ADDR		0x53
#define MPU6050_EXT_SENS_DATA_11_REG_ADDR		0x54
#define MPU6050_EXT_SENS_DATA_12_REG_ADDR		0x55
#define MPU6050_EXT_SENS_DATA_13_REG_ADDR		0x56
#define MPU6050_EXT_SENS_DATA_14_REG_ADDR		0x57
#define MPU6050_EXT_SENS_DATA_15_REG_ADDR		0x58
#define MPU6050_EXT_SENS_DATA_16_REG_ADDR		0x59
#define MPU6050_EXT_SENS_DATA_17_REG_ADDR		0x5A
#define MPU6050_EXT_SENS_DATA_18_REG_ADDR		0x5B
#define MPU6050_EXT_SENS_DATA_19_REG_ADDR		0x5C
#define MPU6050_EXT_SENS_DATA_20_REG_ADDR		0x5D
#define MPU6050_EXT_SENS_DATA_21_REG_ADDR		0x5E
#define MPU6050_EXT_SENS_DATA_22_REG_ADDR		0x5F
#define MPU6050_EXT_SENS_DATA_23_REG_ADDR		0x60
#define MPU6050_MOT_DETECT_STATUS_REG_ADDR		0X61
#define MPU6050_I2C_SLV0_DO_REG_ADDR			0X63
#define MPU6050_I2C_SLV1_DO_REG_ADDR			0X64
#define MPU6050_I2C_SLV2_DO_REG_ADDR			0X65
#define MPU6050_I2C_SLV3_DO_REG_ADDR			0X66
#define MPU6050_I2C_MST_DELAY_CTRL_REG_ADDR		0X67
#define MPU6050_SIGNAL_PATH_RESET_REG_ADDR		0X68
#define MPU6050_MOT_DETECT_CTRL_REG_ADDR		0X69
#define MPU6050_USER_CTRL_REG_ADDR				0X6A
#define MPU6050_PWR_MGMT_1_REG_ADDR				0X6B
#define MPU6050_PWR_MGMT_2_REG_ADDR				0X6C
#define MPU6050_BANK_SEL_REG_ADDR				0X6D
#define MPU6050_MEM_START_ADDR_REG_ADDR			0X6E
#define MPU6050_MEM_R_W_REG_ADDR				0X6F
#define MPU6050_DMP_CFG_1_REG_ADDR				0X70
#define MPU6050_DMP_CFG_2_REG_ADDR				0X71
#define MPU6050_FIFO_COUNTH_REG_ADDR			0X72
#define MPU6050_FIFO_COUNTL_REG_ADDR			0X73
#define MPU6050_FIFO_R_W_REG_ADDR				0X74
#define MPU6050_WHO_AM_I_REG_ADDR				0X75

/* CONFIG register (0x1A) bit definitions */
#define MPU6050_DLPF_CFG_POSN					0
#define MPU6050_DLPF_CFG_MASK					(0x07 << MPU6050_DLPF_CFG_POSN)
#define MPU6050_EXT_SYNC_SET_POSN				3
#define MPU6050_EXT_SYNC_SET_MASK				(0x07 << MPU6050_EXT_SYNC_SET_POSN)

/* GYRO_CONFIG register (0x1B) bit definitions */
#define MPU6050_FS_SEL_POSN						3
#define MPU6050_FS_SEL_MASK						(0x03 << MPU6050_FS_SEL_POSN)
#define MPU6050_ZG_ST_POSN						5
#define MPU6050_ZG_ST_MASK						(0x01 << MPU6050_ZG_ST_POSN)
#define MPU6050_YG_ST_POSN						6
#define MPU6050_YG_ST_MASK						(0x01 << MPU6050_YG_ST_POSN)
#define MPU6050_XG_ST_POSN						7
#define MPU6050_XG_ST_MASK						(0x01 << MPU6050_XG_ST_POSN)

/* ACCEL_CONFIG register (0x1C) bit definitions */
#define MPU6050_ACCEL_HPF_POSN					0
#define MPU6050_ACCEL_HPF_MASK					(0x07 << MPU6050_ACCEL_HPF_POSN)
#define MPU6050_AFS_SEL_POSN					3
#define MPU6050_AFS_SEL_MASK					(0x03 << MPU6050_AFS_SEL_POSN)
#define MPU6050_ZA_ST_POSN						5
#define MPU6050_ZA_ST_MASK						(0x01 << MPU6050_ZA_ST_POSN)
#define MPU6050_YA_ST_POSN						6
#define MPU6050_YA_ST_MASK						(0x01 << MPU6050_YA_ST_POSN)
#define MPU6050_XA_ST_POSN						7
#define MPU6050_XA_ST_MASK						(0x01 << MPU6050_XA_ST_POSN)

/* INT_PIN_CFG register (0x37) bit definitions */
#define MPU6050_CLKOUT_EN_POSN					0
#define MPU6050_CLKOUT_EN_MASK					(0x01 << MPU6050_CLKOUT_EN_POSN)
#define MPU6050_I2C_BYPASS_EN_POSN				1
#define MPU6050_I2C_BYPASS_EN_MASK				(0x01 << MPU6050_I2C_BYPASS_EN_POSN)
#define MPU6050_FSYNC_INT_EN_POSN				2
#define MPU6050_FSYNC_INT_EN_MASK				(0x01 << MPU6050_FSYNC_INT_EN_POSN)
#define MPU6050_FSYNC_INT_LEVEL_POSN			3
#define MPU6050_FSYNC_INT_LEVEL_MASK			(0x01 << MPU6050_FSYNC_INT_LEVEL_POSN)
#define MPU6050_INT_RD_CLEAR_POSN				4
#define MPU6050_INT_RD_CLEAR_MASK				(0x01 << MPU6050_INT_RD_CLEAR_POSN)
#define MPU6050_LATCH_INT_EN_POSN				5
#define MPU6050_LATCH_INT_EN_MASK				(0x01 << MPU6050_LATCH_INT_EN_POSN)
#define MPU6050_INT_OPEN_POSN					6
#define MPU6050_INT_OPEN_MASK					(0x01 << MPU6050_INT_OPEN_POSN)
#define MPU6050_INT_LEVEL_POSN					7
#define MPU6050_INT_LEVEL_MASK					(0x01 << MPU6050_INT_LEVEL_POSN)

/* INT_ENABLE register (0x38) bit definitions */
#define MPU6050_RAW_RDY_EN_POSN					0
#define MPU6050_RAW_RDY_EN_MASK					(0x01 << MPU6050_RAW_RDY_EN_POSN)
#define MPU6050_DMP_INT_EN_POSN					1
#define MPU6050_DMP_INT_EN_MASK					(0x01 << MPU6050_DMP_INT_EN_POSN)
#define MPU6050_PLL_RDY_EN_POSN					2
#define MPU6050_PLL_RDY_EN_MASK					(0x01 << MPU6050_PLL_RDY_EN_POSN)
#define MPU6050_I2C_MST_INT_EN_POSN				3
#define MPU6050_I2C_MST_INT_EN_MASK				(0x01 << MPU6050_I2C_MST_INT_EN_POSN)
#define MPU6050_FIFO_OFLOW_EN_POSN				4
#define MPU6050_FIFO_OFLOW_EN_MASK				(0x01 << MPU6050_FIFO_OFLOW_EN_POSN)
#define MPU6050_ZMOT_EN_POSN					5
#define MPU6050_ZMOT_EN_MASK					(0x01 << MPU6050_ZMOT_EN_POSN)
#define MPU6050_MOT_EN_POSN						6
#define MPU6050_MOT_EN_MASK						(0x01 << MPU6050_MOT_EN_POSN)
#define MPU6050_FF_EN_POSN						7
#define MPU6050_FF_EN_MASK						(0x01 << MPU6050_FF_EN_POSN)

/* DMP_INT_STATUS register (0x39) bit definitions */
#define MPU6050_DMP_INT_0_POSN					0
#define MPU6050_DMP_INT_0_MASK					(0x01 << MPU6050_DMP_INT_0_POSN)
#define MPU6050_DMP_INT_1_POSN					1
#define MPU6050_DMP_INT_1_MASK					(0x01 << MPU6050_DMP_INT_1_POSN)
#define MPU6050_DMP_INT_2_POSN					2
#define MPU6050_DMP_INT_2_MASK					(0x01 << MPU6050_DMP_INT_2_POSN)
#define MPU6050_DMP_INT_3_POSN					3
#define MPU6050_DMP_INT_3_MASK					(0x01 << MPU6050_DMP_INT_3_POSN)
#define MPU6050_DMP_INT_4_POSN					4
#define MPU6050_DMP_INT_4_MASK					(0x01 << MPU6050_DMP_INT_4_POSN)
#define MPU6050_DMP_INT_5_POSN					5
#define MPU6050_DMP_INT_5_MASK					(0x01 << MPU6050_DMP_INT_5_POSN)

/* INT_STATUS register (0x3A) bit definitions */
#define MPU6050_RAW_RDY_INT_POSN				0
#define MPU6050_RAW_RDY_INT_MASK				(0x01 << MPU6050_RAW_RDY_INT_POSN)
#define MPU6050_DMP_INT_POSN					1
#define MPU6050_DMP_INT_MASK					(0x01 << MPU6050_DMP_INT_POSN)
#define MPU6050_PLL_RDY_INT_POSN				2
#define MPU6050_PLL_RDY_INT_MASK				(0x01 << MPU6050_PLL_RDY_INT_POSN)
#define MPU6050_I2C_MST_INT_POSN				3
#define MPU6050_I2C_MST_INT_MASK				(0x01 << MPU6050_I2C_MST_INT_POSN)
#define MPU6050_FIFO_OFLOW_INT_POSN				4
#define MPU6050_FIFO_OFLOW_INT_MASK				(0x01 << MPU6050_FIFO_OFLOW_INT_POSN)
#define MPU6050_ZMOT_INT_POSN					5
#define MPU6050_ZMOT_INT_MASK					(0x01 << MPU6050_ZMOT_INT_POSN)
#define MPU6050_MOT_INT_POSN					6
#define MPU6050_MOT_INT_MASK					(0x01 << MPU6050_MOT_INT_POSN)
#define MPU6050_FF_INT_POSN						7
#define MPU6050_FF_INT_MASK						(0x01 << MPU6050_FF_INT_POSN)

/* SIGNAL_PATH_RESET register (0x68) bit definitions */
#define MPU6050_TEMP_RESET_POSN					0
#define MPU6050_TEMP_RESET_MASK					(0x01 << MPU6050_TEMP_RESET_POSN)
#define MPU6050_ACCEL_RESET_POSN				1
#define MPU6050_ACCEL_RESET_MASK				(0x01 << MPU6050_ACCEL_RESET_POSN)
#define MPU6050_GYRO_RESET_POSN					2
#define MPU6050_GYRO_RESET_MASK					(0x01 << MPU6050_GYRO_RESET_POSN)

/* MOT_DETECT_CTRL register (0x69) bit definitions */
#define MPU6050_MOT_COUNT_POSN					0
#define MPU6050_MOT_COUNT_MASK					(0x03 << MPU6050_RAW_RDY_INT_POSN)
#define MPU6050_FF_COUNT_POSN					2
#define MPU6050_FF_COUNT_MASK					(0x03 << MPU6050_FF_COUNT_POSN)
#define MPU6050_ACCEL_ON_DELAY_POSN				4
#define MPU6050_ACCEL_ON_DELAY_MASK				(0x03 << MPU6050_ACCEL_ON_DELAY_POSN)

/* USER_CTRL register (0x6A) bit definitions */
#define MPU6050_SIG_COND_RESET_POSN				0
#define MPU6050_SIG_COND_RESET_MASK				(0x01 << MPU6050_SIG_COND_RESET_POSN)
#define MPU6050_I2C_MST_RESET_POSN				1
#define MPU6050_I2C_MST_RESET_MASK				(0x01 << MPU6050_I2C_MST_RESET_POSN)
#define MPU6050_FIFO_RESET_POSN					2
#define MPU6050_FIFO_RESET_MASK					(0x01 << MPU6050_FIFO_RESET_POSN)
#define MPU6050_DMP_RESET_POSN					3
#define MPU6050_DMP_RESET_MASK					(0x01 << MPU6050_DMP_RESET_POSN)
#define MPU6050_I2C_IF_DIS_POSN					4
#define MPU6050_I2C_IF_DIS_MASK					(0x01 << MPU6050_I2C_IF_DIS_POSN)
#define MPU6050_I2C_MST_EN_POSN					5
#define MPU6050_I2C_MST_EN_MASK					(0x01 << MPU6050_I2C_MST_EN_POSN)
#define MPU6050_FIFO_EN_POSN					6
#define MPU6050_FIFO_EN_MASK					(0x01 << MPU6050_FIFO_EN_POSN)
#define MPU6050_DMP_EN_POSN						7
#define MPU6050_DMP_EN_MASK						(0x01 << MPU6050_DMP_EN_POSN)

/* PWM_MGMT_1 register (0x6B) bit definitions */
#define MPU6050_CLK_SEL_POSN					0
#define MPU6050_CLK_SEL_MASK					(0x07 << MPU6050_DEVICE_RESET_POSN)
#define MPU6050_TEMP_DIS_POSN					3
#define MPU6050_TEMP_DIS_MASK					(0x01 << MPU6050_TEMP_DIS_POSN)
#define MPU6050_CYCLE_POSN						5
#define MPU6050_CYCLE_MASK						(0x01 << MPU6050_CYCLE_POSN)
#define MPU6050_SLEEP_POSN						6
#define MPU6050_SLEEP_MASK						(0x01 << MPU6050_SLEEP_POSN)
#define MPU6050_DEVICE_RESET_POSN				7
#define MPU6050_DEVICE_RESET_MASK				(0x01 << MPU6050_DEVICE_RESET_POSN)

/* PWM_MGMT_2 register (0x6C) bit definitions */
#define MPU6050_STBY_ZG_POSN					0
#define MPU6050_STBY_ZG_MASK					(0x01 << MPU6050_STBY_ZG_POSN)
#define MPU6050_STBY_YG_POSN					1
#define MPU6050_STBY_YG_MASK					(0x01 << MPU6050_STBY_YG_POSN)
#define MPU6050_STBY_XG_POSN					2
#define MPU6050_STBY_XG_MASK					(0x01 << MPU6050_STBY_XG_POSN)
#define MPU6050_STBY_ZA_POSN					3
#define MPU6050_STBY_ZA_MASK					(0x01 << MPU6050_STBY_ZA_POSN)
#define MPU6050_STBY_YA_POSN					4
#define MPU6050_STBY_YA_MASK					(0x01 << MPU6050_STBY_YA_POSN)
#define MPU6050_STBY_XA_POSN					5
#define MPU6050_STBY_XA_MASK					(0x01 << MPU6050_STBY_XA_POSN)
#define MPU6050_LP_WAKE_CTRL_POSN				6
#define MPU6050_LP_WAKE_CTRL_MASK				(0x03 << MPU6050_LP_WAKE_CTRL_POSN)

/* BANK_SEL register (0x6D) bit definitions */
#define MPU6050_MEM_SEL_POSN					0
#define MPU6050_MEM_SEL_MASK					(0x1F << MPU6050_MEM_SEL_POSN)
#define MPU6050_CFG_USER_BANK_POSN				5
#define MPU6050_CFG_USER_BANK_MASK				(0x01 << MPU6050_CFG_USER_BANK_POSN)
#define MPU6050_PRFTCH_EN_POSN					6
#define MPU6050_PRFTCH_EN_MASK					(0x01 << MPU6050_PRFTCH_EN_POSN)

/* WAIT_AM_I register (0x75) bit definitions */
#define MPU6050_WHO_AM_I_POSN					1
#define MPU6050_WHO_AM_I_MASK					(0x3F << MPU6050_WHO_AM_I_POSN)

void mpu6050_setAddress(uint8_t address);
bool mpu6050_writeReg(uint8_t addr, uint8_t data);
bool mpu6050_readReg(uint8_t addr, uint8_t *data, uint8_t nBytes);

#endif /* MPU6050_H_ */
