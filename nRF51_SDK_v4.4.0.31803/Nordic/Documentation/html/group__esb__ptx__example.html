<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Enhanced Shockburst Transmitter (PTX)</title>
<link href="tabs.css" rel="stylesheet" type="text/css" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="alias.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="alias.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/javascript">
  jQuery(document).ready(function () {
    if(gref){ // Number all _img and _table classes
      gref();
    }
  });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__esb__ptx__example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Enhanced Shockburst Transmitter (PTX)<div class="ingroups"><a class="el" href="group__esb__03__examples.html">Enhanced ShockBurst</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#gae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:gae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function.  <a href="#gae66f6b31b5ad750f1fe042a706a4e3d4">More...</a><br/></td></tr>
<tr class="separator:gae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Configuration</h2></td></tr>
<tr class="memitem:gac9529b52fe15ed7ef5987cc532bad7ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac9529b52fe15ed7ef5987cc532bad7ee"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#gac9529b52fe15ed7ef5987cc532bad7ee">my_tx_payload</a> [<a class="el" href="group__gzll__host__ack__payload__example.html#gaed1097d348540e6d609ced933dfaa26b">TX_PAYLOAD_LENGTH</a>]</td></tr>
<tr class="memdesc:gac9529b52fe15ed7ef5987cc532bad7ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Payload to send to PRX. <br/></td></tr>
<tr class="separator:gac9529b52fe15ed7ef5987cc532bad7ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga382558c0a96a8612adf61ebc9a1c1eba"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga382558c0a96a8612adf61ebc9a1c1eba"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#ga382558c0a96a8612adf61ebc9a1c1eba">my_rx_payload</a> [<a class="el" href="group__esb__02__api.html#ga6fb1ece47082353129db90fd919fe0d2">NRF_ESB_CONST_MAX_PAYLOAD_LENGTH</a>]</td></tr>
<tr class="memdesc:ga382558c0a96a8612adf61ebc9a1c1eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Placeholder for received ACK payloads from PRX. <br/></td></tr>
<tr class="separator:ga382558c0a96a8612adf61ebc9a1c1eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae28843c923b3481f8a94798e7ccba523"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae28843c923b3481f8a94798e7ccba523"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#gae28843c923b3481f8a94798e7ccba523">PIPE_NUMBER</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gae28843c923b3481f8a94798e7ccba523"><td class="mdescLeft">&#160;</td><td class="mdescRight">We use pipe 0 in this example. <br/></td></tr>
<tr class="separator:gae28843c923b3481f8a94798e7ccba523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a2f690f8bdeeb4003203ff5e3edaffc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2a2f690f8bdeeb4003203ff5e3edaffc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#ga2a2f690f8bdeeb4003203ff5e3edaffc">BUTTONS</a>&#160;&#160;&#160;<a class="el" href="group__nrf__gpio.html#ggaa1a5c145e334817f2d960317d64fcb3dada4c86d9760e81857ec0482c1cc78190">NRF_GPIO_PORT_SELECT_PORT0</a></td></tr>
<tr class="memdesc:ga2a2f690f8bdeeb4003203ff5e3edaffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO port for reading from buttons. <br/></td></tr>
<tr class="separator:ga2a2f690f8bdeeb4003203ff5e3edaffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61686d33603491344883775b9b31e172"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga61686d33603491344883775b9b31e172"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#ga61686d33603491344883775b9b31e172">LEDS</a>&#160;&#160;&#160;<a class="el" href="group__nrf__gpio.html#ggaa1a5c145e334817f2d960317d64fcb3da9209d7820d65eb58c7804e676581bf40">NRF_GPIO_PORT_SELECT_PORT1</a></td></tr>
<tr class="memdesc:ga61686d33603491344883775b9b31e172"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO port for writing to LEDs. <br/></td></tr>
<tr class="separator:ga61686d33603491344883775b9b31e172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed1097d348540e6d609ced933dfaa26b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaed1097d348540e6d609ced933dfaa26b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#gaed1097d348540e6d609ced933dfaa26b">TX_PAYLOAD_LENGTH</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gaed1097d348540e6d609ced933dfaa26b"><td class="mdescLeft">&#160;</td><td class="mdescRight">We use 1 byte payload length when transmitting. <br/></td></tr>
<tr class="separator:gaed1097d348540e6d609ced933dfaa26b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
ESB callback function definitions</h2></td></tr>
<tr class="memitem:ga416a6ef0fc94e7df9054e71c8784095a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#ga416a6ef0fc94e7df9054e71c8784095a">nrf_esb_tx_success</a> (uint32_t tx_pipe, int32_t rssi)</td></tr>
<tr class="memdesc:ga416a6ef0fc94e7df9054e71c8784095a"><td class="mdescLeft">&#160;</td><td class="mdescRight">TX success callback.  <a href="#ga416a6ef0fc94e7df9054e71c8784095a">More...</a><br/></td></tr>
<tr class="separator:ga416a6ef0fc94e7df9054e71c8784095a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03993c4e0419bbcac77aa0965ecce6ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#ga03993c4e0419bbcac77aa0965ecce6ad">nrf_esb_tx_failed</a> (uint32_t tx_pipe)</td></tr>
<tr class="memdesc:ga03993c4e0419bbcac77aa0965ecce6ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">TX failed callback (PTX mode only).  <a href="#ga03993c4e0419bbcac77aa0965ecce6ad">More...</a><br/></td></tr>
<tr class="separator:ga03993c4e0419bbcac77aa0965ecce6ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3042dde4c3151c1517f4998378f52ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#gab3042dde4c3151c1517f4998378f52ce">nrf_esb_rx_data_ready</a> (uint32_t rx_pipe, int32_t rssi)</td></tr>
<tr class="memdesc:gab3042dde4c3151c1517f4998378f52ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">RX data ready callback.  <a href="#gab3042dde4c3151c1517f4998378f52ce">More...</a><br/></td></tr>
<tr class="separator:gab3042dde4c3151c1517f4998378f52ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e82709bd23aa952a883db3af5b987e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__esb__ptx__example.html#ga5e82709bd23aa952a883db3af5b987e0">nrf_esb_disabled</a> (void)</td></tr>
<tr class="memdesc:ga5e82709bd23aa952a883db3af5b987e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disabled callback.  <a href="#ga5e82709bd23aa952a883db3af5b987e0">More...</a><br/></td></tr>
<tr class="separator:ga5e82709bd23aa952a883db3af5b987e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This project requires that a device running the <a class="el" href="group__esb__ptx__example.html">Enhanced Shockburst Transmitter (PTX)</a> example be used as a counterpart for receiving the data. This can be on either nRF51 device or a nRF24Lxx device running the <b>esb_ptx_example</b> in the nRFgo SDK.</p>
<p>This example sends a packet and adds a new packet to the TX queue every time it receives an ACK. The contents of GPIO Port BUTTONS are sent in the first payload byte (byte 0). The host sends an acknowledgement that is received by the device. The contents of the first payload byte of the acknowledgement is output on GPIO Port LEDS. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>ANSI required int return type. </dd></dl>

</div>
</div>
<a class="anchor" id="ga416a6ef0fc94e7df9054e71c8784095a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nrf_esb_tx_success </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tx_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>rssi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>In PTX mode this function is called after the PTX has sent a packet and received the corresponding ACK packet from a PRX.</p>
<p>In PRX mode this function is called after a payload in ACK is assumed successfully transmitted, that is when the PRX received a new packet (new PID or CRC) and the previous ACK sent to a PTX contained a payload.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_pipe</td><td>The pipe on which the ACK packet was received.</td></tr>
    <tr><td class="paramname">rssi</td><td>Received signal strength indicator in dBm of measured ACK.</td></tr>
  </table>
  </dd>
</dl>
<p>As the RSSI measurement requires a minimum on-air duration of the received packet, the measured RSSI value will not be reliable when ALL of the following criteria are met:</p>
<ul>
<li>Datarate = 2 Mbps</li>
<li>Payload length = 0</li>
<li>CRC is off </li>
</ul>

</div>
</div>
<a class="anchor" id="ga03993c4e0419bbcac77aa0965ecce6ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nrf_esb_tx_failed </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tx_pipe</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is called after the maximum number of TX attempts were reached for a packet. The packet is deleted from the TX FIFO.</p>
<p>Note that when NRF_ESB_PACKET_NO_ACK is used this callback is always made after sending a packet. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__esb__02__api.html#ga8cdcef8f56272380546af260bcea0ad8" title="Set the maximum number of TX attempts that can be used for a single packet.">nrf_esb_set_max_number_of_tx_attempts()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_pipe</td><td>The pipe that failed to send a packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab3042dde4c3151c1517f4998378f52ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nrf_esb_rx_data_ready </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>rx_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>rssi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PTX mode: This is called after an ACK is received from a PRX containing a payload.</p>
<p>PRX mode: This is called after a packet is received from a PTX ACK is received from a PRX containing a payload.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rx_pipe</td><td>is the pipe on which a packet was received. This value must be &lt; NRF_ESB_CONST_PIPE_COUNT.</td></tr>
    <tr><td class="paramname">rssi</td><td>Received signal strength indicator in dBm of packet.</td></tr>
  </table>
  </dd>
</dl>
<p>As the RSSI measurement requires a minimum on-air duration of the received packet, the measured RSSI value will not be reliable when ALL of the following criteria are met:</p>
<ul>
<li>Datarate = 2 Mbps</li>
<li>Payload length = 0</li>
<li>CRC is off </li>
</ul>

</div>
</div>
<a class="anchor" id="ga5e82709bd23aa952a883db3af5b987e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nrf_esb_disabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is called after ESB enters the disabled state. There is no further CPU use by ESB, the radio is disabled and the timer is powered down. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

    <li class="footer">
      Copyright &copy 2006-2013 <a href="http://www.nordicsemi.no" style="text-decoration:none">Nordic Semiconductor</a>.
      All Rights Reserved.
      <a href="disclaimer.html">Disclaimer</a>
    </li>
   </ul>
 </div>
</body>
</html>
