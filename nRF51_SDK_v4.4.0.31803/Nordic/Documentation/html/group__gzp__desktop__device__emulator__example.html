<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Gazell Pairing Desktop Device Emulator</title>
<link href="tabs.css" rel="stylesheet" type="text/css" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="alias.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="alias.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/javascript">
  jQuery(document).ready(function () {
    if(gref){ // Number all _img and _table classes
      gref();
    }
  });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__gzp__desktop__device__emulator__example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Gazell Pairing Desktop Device Emulator<div class="ingroups"><a class="el" href="group__gzp__03__examples.html">Gazell Pairing</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__gzp__keyboard__emulator"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__keyboard__emulator.html">Keyboard Emulator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__gzp__mouse__emulator"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__mouse__emulator.html">Mouse Emulator</a></td></tr>
<tr class="memdesc:group__gzp__mouse__emulator"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emulates a mouse using one of the nRF51's timer peripherals. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#gae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:gae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function.  <a href="#gae66f6b31b5ad750f1fe042a706a4e3d4">More...</a><br/></td></tr>
<tr class="separator:gae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44e0cb4f9809ff42d1b7b8d6900594a7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga44e0cb4f9809ff42d1b7b8d6900594a7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga44e0cb4f9809ff42d1b7b8d6900594a7">mouse_sensor_new_sample_generated_cb</a> ()</td></tr>
<tr class="memdesc:ga44e0cb4f9809ff42d1b7b8d6900594a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when a new sample is generated by the mouse sensor. When the mouse sensor is enabled, this function will be called at a rate as specified by <a class="el" href="group__gzp__mouse__emulator.html#ga7e4ee6ae6335b28a3e19de56d9cee48e" title="Function for initializing the mouse sensor.">mouse_sensor_init()</a>. <br/></td></tr>
<tr class="separator:ga44e0cb4f9809ff42d1b7b8d6900594a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga22d6ee8780ac4d80155c2cb145db16a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga22d6ee8780ac4d80155c2cb145db16a4"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga22d6ee8780ac4d80155c2cb145db16a4">host_id_received</a> = false</td></tr>
<tr class="memdesc:ga22d6ee8780ac4d80155c2cb145db16a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Host ID received. <br/></td></tr>
<tr class="separator:ga22d6ee8780ac4d80155c2cb145db16a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90d68c87e16d389d360ca980d0c2f9c0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga90d68c87e16d389d360ca980d0c2f9c0"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga90d68c87e16d389d360ca980d0c2f9c0">system_addr_received</a> = false</td></tr>
<tr class="memdesc:ga90d68c87e16d389d360ca980d0c2f9c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">System address receivedfrom Host. <br/></td></tr>
<tr class="separator:ga90d68c87e16d389d360ca980d0c2f9c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0daf214f48a95ce4131ff37eb46fa4f0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0daf214f48a95ce4131ff37eb46fa4f0"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga0daf214f48a95ce4131ff37eb46fa4f0">dyn_key_ok</a> = false</td></tr>
<tr class="memdesc:ga0daf214f48a95ce4131ff37eb46fa4f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamic key is up to date. <br/></td></tr>
<tr class="separator:ga0daf214f48a95ce4131ff37eb46fa4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Configuration</h2></td></tr>
<tr class="memitem:gaec0d4edce3403a88f2e5913de1d8f002"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaec0d4edce3403a88f2e5913de1d8f002"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#gaec0d4edce3403a88f2e5913de1d8f002">BUTTON_SEND_KEYBOARD_DATA</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gaec0d4edce3403a88f2e5913de1d8f002"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO pin for reading from a button to emulate a keypress. <br/></td></tr>
<tr class="separator:gaec0d4edce3403a88f2e5913de1d8f002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e5936c18b1bde3c4fa5c8dd6faccb99"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6e5936c18b1bde3c4fa5c8dd6faccb99"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga6e5936c18b1bde3c4fa5c8dd6faccb99">BUTTON_SEND_MOUSE_DATA</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga6e5936c18b1bde3c4fa5c8dd6faccb99"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO pin for reading from a button to emulate a mouse movement. <br/></td></tr>
<tr class="separator:ga6e5936c18b1bde3c4fa5c8dd6faccb99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga663daa01e565aee93c6f20c5845b90b4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga663daa01e565aee93c6f20c5845b90b4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LED_PORT</b>&#160;&#160;&#160;<a class="el" href="group__nrf__gpio.html#ggaa1a5c145e334817f2d960317d64fcb3da9209d7820d65eb58c7804e676581bf40">NRF_GPIO_PORT_SELECT_PORT1</a></td></tr>
<tr class="separator:ga663daa01e565aee93c6f20c5845b90b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e4cded9b3fd8cfe6b70725a0e6d037d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0e4cded9b3fd8cfe6b70725a0e6d037d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYBOARD_LED</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:ga0e4cded9b3fd8cfe6b70725a0e6d037d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa7fb8ca2e40785df2c7d47dba537f94c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa7fb8ca2e40785df2c7d47dba537f94c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOUSE_LED</b>&#160;&#160;&#160;9</td></tr>
<tr class="separator:gaa7fb8ca2e40785df2c7d47dba537f94c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac10b5f3daa346caa255d0c8ba5b04843"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac10b5f3daa346caa255d0c8ba5b04843"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SYS_ADDR_OK_LED</b>&#160;&#160;&#160;10</td></tr>
<tr class="separator:gac10b5f3daa346caa255d0c8ba5b04843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga459eed4f1f2de967a14969c153b329d6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga459eed4f1f2de967a14969c153b329d6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HOST_ID_OK_LED</b>&#160;&#160;&#160;11</td></tr>
<tr class="separator:ga459eed4f1f2de967a14969c153b329d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93620096237fc2502d232eefd9d82b4f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga93620096237fc2502d232eefd9d82b4f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DYN_KEY_OK_LED</b>&#160;&#160;&#160;12</td></tr>
<tr class="separator:ga93620096237fc2502d232eefd9d82b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Static (internal) functions.</h2></td></tr>
<tr class="memitem:ga9b26adb5f029dacf83c3f580558876bb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga9b26adb5f029dacf83c3f580558876bb">read_mouse_and_send</a> (void)</td></tr>
<tr class="separator:ga9b26adb5f029dacf83c3f580558876bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ec5a78672831360eb686392b83439d4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga6ec5a78672831360eb686392b83439d4">read_keyboard_and_send</a> (void)</td></tr>
<tr class="separator:ga6ec5a78672831360eb686392b83439d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c3f52622d49819deb144b69349a709b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__gzp__02__api.html#ga460dd99921f6d26ea5dc52f56c945b52">gzp_id_req_res_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gzp__desktop__device__emulator__example.html#ga7c3f52622d49819deb144b69349a709b">send_host_id_req</a> (void)</td></tr>
<tr class="separator:ga7c3f52622d49819deb144b69349a709b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This project can be used as a starting point for developing a nRF51 series mouse or keyboard using Gazell for communicating with a legacy nRF24LU1 USB dongle. It can communicate "out of the box" with the Dongle reference design and the nRFreadySimplePairing.exe application, that can be found in the nRFready Desktop v1.2.3.</p>
<p>This project sends mouse movement packets to the USB dongle when pin 1 is low (button connected to pin 1 pressed) and sends the 'a' keyboard character to the USB dongle when pin 2 goes from high to low (button connected to pin 2 pressed). </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9b26adb5f029dacf83c3f580558876bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void read_mouse_and_send </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks to see whether the mouse sensor has data to send. If so, adds this to the (unencrypted) Gazell TX FIFO on pipe NRFR_MOUSE_EP. </p>

</div>
</div>
<a class="anchor" id="ga6ec5a78672831360eb686392b83439d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void read_keyboard_and_send </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks to see whether the mouse sensor has data and send unencrypted.</p>
<p>If so, adds this to the (unencrypted) Gazell TX FIFO on pipe NRFR_MOUSE_EP. Checks to see whether the keyboard has data and send encrypted.</p>
<p>If the Device does net yet have the system address it will try to obtain it. After obtaining the system address it will attempt to obtain the Host ID. The keyboard data is discarded if pairing is not successful. It may take a few attempts to obtain the Host ID as this may not be yet generated at the Host. </p>

</div>
</div>
<a class="anchor" id="ga7c3f52622d49819deb144b69349a709b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__gzp__02__api.html#ga460dd99921f6d26ea5dc52f56c945b52">gzp_id_req_res_t</a> send_host_id_req </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send a Host ID request and process the response.</p>
<p>If the request was rejected or failed (i.e. timed out), system_addr_received will be reset and the pairing process will begin on the next keypress.</p>
<p>If the request was received, subsequent keyboard data will be transmitted on an encrypted link.</p>
<p>If teh request is still pending, nothing is done. Further keypresses will initiate another</p>
<dl class="section return"><dt>Returns</dt><dd>The result of the Host ID request. </dd></dl>

</div>
</div>
<a class="anchor" id="gae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>ANSI required int return type. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

    <li class="footer">
      Copyright &copy 2006-2013 <a href="http://www.nordicsemi.no" style="text-decoration:none">Nordic Semiconductor</a>.
      All Rights Reserved.
      <a href="disclaimer.html">Disclaimer</a>
    </li>
   </ul>
 </div>
</body>
</html>
