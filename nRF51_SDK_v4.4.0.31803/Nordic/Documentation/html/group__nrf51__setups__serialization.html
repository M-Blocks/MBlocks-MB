<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>&#39;Board Setup&#39;</title>
<link href="tabs.css" rel="stylesheet" type="text/css" />
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="alias.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="alias.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/javascript">
  jQuery(document).ready(function () {
    if(gref){ // Number all _img and _table classes
      gref();
    }
  });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__nrf51__setups__serialization.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">'Board Setup'<div class="ingroups"><a class="el" href="group__ble__apps__serialization.html">BLE S110 - Serialization</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Hardware configurations for Serialized Bluetooth Application with nRF51822 Connectivity Chip.  
<a href="#details">More...</a></p>
<h1><a class="anchor" id="nrf51_setup_nrf6310_serialization_terminology"></a>
Terminology</h1>
<p>This page uses the following terminology.</p>
<p><b>Application Board</b> - The nRFgo MotherBoard mounted with nRF51822 acting as application controller.</p>
<p><b>Connectivity Board</b> - The nRFgo MotherBoard mounted with nRF51822 acting as connectivity chip.</p>
<h1><a class="anchor" id="nrf51_setup_nrf6310_serialization"></a>
nRFgo Motherboard Setup (nRF6310)</h1>
<p>The following instructions describe how to set up two nRFgo Motherboards to be used for testing a serialized Bluetooth Application.<br/>
 <br/>
 The Application Board will have the nRF51822 that will act as an application controller mounted on it. In this chip, an example application that has been modified to use the <a class="el" href="group__rpc__command__encoder.html">Commands Encoder</a>, <a class="el" href="group__rpc__evt__decoder.html">Events Decoder</a>, and rpc_transport, instead of the <a class="el" href="group__nrf518__lib__ble__s110.html">S110 SoftDevice</a>, will be running.<br/>
 <br/>
 The Connectivity Board will have the nRF51822 that will act as a connectivity chip mounted on it. This will run the application that will decode the serialized commands received from the application controller and execute the corresponding S110 SoftDevice API. This will be done using the rpc_cmd_decoder. The connectivity chip will then encode return value of S110 SoftDevice API and transmit it back as the response to the application controller.<br/>
 The connectivity chip will also encode all events from the S110 SoftDevice using the rpc_event_encoder and transmit them to the application controller. <br/>
</p>
<ul>
<li>Mount two nRFgo Motherboards (nRF6310) with a PCA10004/PCA10005 module on each.</li>
</ul>
<p><b>Application Board setup </b></p>
<ul>
<li>Connect a 10p flat cable (2.54 mm, included in nRFgo Starter Kit) from <b>PORT0</b> to the <b>BUTTONS</b> connector. In doing so, ensure that <b>P0.0</b> is connected to BUTTON 1.</li>
<li>Connect another 10p flat cable (2.54 mm, also included in nRFgo Starter Kit) from <b>PORT1</b> to the <b>LEDS</b> connector. In doing so, ensure that <b>P1.0</b> is connected to LED 1. (Refer to the image in 'Connect the hardware' section of the 'Getting Started Guide' to see this connection)</li>
</ul>
<p><b>Connectivity Board setup </b></p>
<ul>
<li>Connect a 10p flat cable (2.54 mm, included in nRFgo Starter Kit) from <b>PORT1</b> to the <b>LEDS</b> connector. In doing so, ensure that <b>P1.0</b> is connected to LED 1. (Refer to the image in 'Connect the hardware' section of the 'Getting Started Guide' to see this connection)</li>
</ul>
<ul>
<li>Connect both the Motherboards to the PC using USB cables.</li>
</ul>
<div class="image">
<img src="example_board_setup_serialization.png" alt="example_board_setup_serialization.png"/>
<div class="caption">
nRFgo Motherboard Setup for Serialization examples.</div></div>
<p><br/>
 <b>Inter-board connections.</b></p>
<ul>
<li>RX-TX: Connect <b>P2.0</b> (RX) on Application Board to <b>P2.1</b> (TX) on Connectivity Board.</li>
<li>TX-RX: Connect <b>P2.1</b> (TX) on Application Board to <b>P2.0</b> (RX) on Connectivity Board.</li>
<li>CTS-RTS: Connect <b>P2.2</b> (CTS) on Application Board to <b>P2.3</b> (RTS) on Connectivity Board.</li>
<li>RTS-CTS: Connect <b>P2.3</b> (RTS) on Application Board to <b>P2.2</b> (CTS) on Connectivity Board.</li>
<li>Reset line: Connect <b>P3.6</b> on Application Board to Reset pin nRF Debug <b>P12.7</b> on Connectivity Board.</li>
<li>Ground: Connect <b>GND</b> pin (choose any available GND pin) on Application Board to a <b>GND</b> pin on Connectivity Board.</li>
</ul>
<div class="image">
<img src="example_interboard_connections_setup_serialization.png" alt="example_interboard_connections_setup_serialization.png"/>
<div class="caption">
Close-up picture of nRFgo Motherboard inter-board connections.</div></div>
 <dl class="section note"><dt>Note</dt><dd>For all serialization examples, this same hardware setup is used.</dd></dl>
<h2><a class="anchor" id="nrf51_flashing_nrf6310_serialization"></a>
Prepare nRF51822 boards</h2>
<ul>
<li>Application board<ul>
<li>Attach the J-Link Lite CortexM-9 to the Application board.</li>
<li>Erase all existing software on this board including S110 SoftDevice. <br/>
 This can be done by following the nRF51822 DK User Guide, 'Programming and erasing flash using nRFgo Studio' or using the <code>nrfjprog</code> software from the command line, e.g. <br/>
 <pre class="fragment">C:\&gt;nrfjprog --eraseall --snr &lt;Segger-chip-SNR&gt; </pre></li>
</ul>
</li>
</ul>
<ul>
<li>Connectivity Board<ul>
<li>Detach the reset cable from pin <b>P12.7</b> on the Connectivity Board.</li>
<li>Attach the J-Link Lite CortexM-9 to the Connectivity Board.</li>
<li>Program the S110 SoftDevice. This can be done by following the nRF51822 DK User Guide, 'Programming and erasing flash using nRFgo Studio' or using the <code>nrfjprog</code> software from the command line, e.g. <br/>
 <pre class="fragment">C:\&gt;nrfjprog --programs &lt;Path-to_SoftDevice&gt;\s110_nrf51822_x.x.x.softdevice.hex --snr &lt;Segger-chip-SNR&gt; </pre></li>
<li>Detach the J-Link Lite CortexM-9 from the Connectivity Board.</li>
<li>Attach the reset cable to pin <b>P12.7</b> on the Connectivity Board.</li>
</ul>
</li>
</ul>
<ul>
<li>Connect the Master Emulator (nRF2739) to the PC.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><code>nrfjprog</code> is expected to be located in the windows system path, <code>PATH%</code>, for the above command to work, otherwise full path to <code>nrfjprog</code> must be given.</dd></dl>
<div class="image">
<img src="segger_snr_location.png" alt="segger_snr_location.png"/>
<div class="caption">
J-Link Lite CortexM-9 SNR location (Serial number).</div></div>
 <h2><a class="anchor" id="nrf51_conn_chip_flashing_nrf6310_serialization"></a>
Flashing of nRF51822 Connectivity Chip software</h2>
<ul>
<li>Detach the reset cable from pin <b>P12.7</b> on the Connectivity Board.</li>
<li>Attach the J-Link Lite CortexM-9 to the Connectivity Board.</li>
<li>Open the <a class="el" href="group__ble__sdk__app__connectivity.html">BLE S110 Connectivity Chip</a> project in Keil, compile, and flash.</li>
<li>Detach the J-Link Lite CortexM-9 from the Connectivity Board.</li>
<li>Attach the reset cable to pin <b>P12.7</b> on the Connectivity Board.</li>
</ul>
<h2><a class="anchor" id="nrf51_app_flashing_nrf6310_serialization"></a>
Flashing of Serialized Bluetooth Application</h2>
<ul>
<li>Attach the J-Link Lite CortexM-9 to the Application board.</li>
<li>Open a serialized Bluetooth Application project in Keil, compile, and flash the application to the Application board, e.g. <a class="el" href="group__ble__sdk__app__hrs__ser.html">Heart Rate Application - Serialized</a>.</li>
</ul>
<h2><a class="anchor" id="nrf51_board_reset_serialization"></a>
Verifying the application</h2>
<p>Use the following steps to verify that the application is able to connect to the nRF51822 connectivity chip and start advertizing.</p>
<ul>
<li>Power on the Connectivity Board.</li>
<li>Power on the Application board.</li>
<li>On the Application board.<ul>
<li>Verify <b>LED 0</b> is lit, indicating that the serialized Bluetooth Application has successfully transmitted serialized commands to the Connectivity Chip and that the latter has started advertising.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="nrf51_pins_nrf6310_serialization"></a>
GPIO Pin assignments</h2>
<p>Some of the GPIO pins are already defined to have a special purpose:</p>
<ul>
<li>PIN 0 to 7 - is used for buttons (Named P0.0-P0.7 on the nRF6310 Motherboard).</li>
<li>PIN 8 to 15 - is used for LEDs (Named P1.0-P1.7 on the nRF6310 Motherboard).</li>
<li>PIN 16 - is used for serial RX (P2.0 on the nRF6310 Motherboard).</li>
<li>PIN 17 - is used for serial TX (P2.1 on the nRF6310 Motherboard).</li>
<li>PIN 18 - is used as Clear To Send pin for Hardware Flow Control (P2.2 on the nRF6310 Motherboard).</li>
<li>PIN 19 - is used as Ready To Send pin for Hardware Flow Control (P2.3 on the nRF6310 Motherboard).</li>
<li>PIN 30 - is used for reset signal from Application board to the connectivity chip. </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->

    <li class="footer">
      Copyright &copy 2006-2013 <a href="http://www.nordicsemi.no" style="text-decoration:none">Nordic Semiconductor</a>.
      All Rights Reserved.
      <a href="disclaimer.html">Disclaimer</a>
    </li>
   </ul>
 </div>
</body>
</html>
